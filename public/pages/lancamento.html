<!-- pages/lancamento.html -->
<div class="lancamento-page">
    <div class="page-header">
        <h2 class="page-title"><i class="fas fa-plus me-2"></i>Novo Lançamento</h2>
        <button type="button" class="btn btn-secondary" onclick="Navigation.navigate('inicio')">
            <i class="fas fa-arrow-left me-1"></i>Voltar
        </button>
    </div>

    <div class="content-card">
        <form id="form-lancamento">
            <!-- Informações Básicas -->
            <div class="form-section mb-4">
                <h5 class="form-section-title">Informações Básicas</h5>
                <div class="row">
                    <div class="col-12 mb-3">
                        <label for="lanc-descricao" class="form-label">Descrição *</label>
                        <input type="text" class="form-control" id="lanc-descricao" required placeholder="Ex: Compras do mês">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lanc-data" class="form-label">Data do Lançamento *</label>
                        <input type="date" class="form-control" id="lanc-data" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lanc-data-vencimento" class="form-label">Data de Vencimento *</label>
                        <input type="date" class="form-control" id="lanc-data-vencimento" required>
                    </div>
                </div>
            </div>

            <!-- Categorização -->
            <div class="form-section mb-4">
                <h5 class="form-section-title">Categorização</h5>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Tipo *</label>
                        <div class="btn-group w-100">
                            <input type="radio" class="btn-check" name="tipo" id="tipo-despesa" value="Despesa" checked>
                            <label class="btn btn-outline-danger" for="tipo-despesa">
                                <i class="fas fa-arrow-down me-2"></i>Despesa
                            </label>
                            <input type="radio" class="btn-check" name="tipo" id="tipo-receita" value="Receita">
                            <label class="btn btn-outline-success" for="tipo-receita">
                                <i class="fas fa-arrow-up me-2"></i>Receita
                            </label>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lanc-categoria" class="form-label">Categoria *</label>
                        <div class="input-group">
                            <select class="form-select" id="lanc-categoria" required></select>
                            <button class="btn btn-outline-secondary" type="button" id="btn-add-categoria">+</button>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="lanc-fonte" class="form-label">Fonte/Conta *</label>
                        <div class="input-group">
                            <select class="form-select" id="lanc-fonte" required></select>
                            <button class="btn btn-outline-secondary" type="button" id="btn-add-fonte">+</button>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lanc-moeda" class="form-label">Moeda</label>
                        <input type="text" class="form-control" id="lanc-moeda" readonly>
                    </div>
                </div>
            </div>

            <!-- Valores e Divisão -->
            <div class="form-section mb-4">
                <h5 class="form-section-title">Valores e Divisão</h5>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="lanc-valor" class="form-label">Valor *</label>
                        <input type="number" class="form-control" id="lanc-valor" step="0.01" required placeholder="0.00">
                        <div id="info-conversao" class="form-text"></div>
                    </div>
                    <div class="col-md-6 mb-3 align-self-center">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="dividir-centros">
                            <label class="form-check-label" for="dividir-centros">Dividir entre centros de custo</label>
                        </div>
                    </div>
                </div>
                
                <div id="container-principal-centro-custo">
                    <div class="col-md-6 mb-3">
                        <label for="lanc-centro-custo" class="form-label">Centro de Custo *</label>
                        <div class="input-group">
                            <select class="form-select" id="lanc-centro-custo"></select>
                            <button class="btn btn-outline-secondary" type="button" id="btn-add-centro">+</button>
                        </div>
                    </div>
                </div>
                
                <div id="container-divisao-centros" class="mt-3" style="display: none;">
                    <div id="resumo-divisao" class="p-2 mb-2 rounded bg-light"></div>
                    <div id="lista-divisao-centros"></div>
                </div>
            </div>

            <!-- Opções Avançadas -->
            <div class="form-section mb-4">
                <h5 class="form-section-title">Opções Avançadas</h5>
                <select class="form-select" id="tipo-recorrencia">
                    <option value="unica" selected>Lançamento Único</option>
                    <option value="parcelado">Parcelado (Valor Total Dividido)</option>
                    <option value="recorrente">Recorrente (Valor Fixo)</option>
                </select>
                <div id="container-recorrencia" class="mt-3" style="display: none;"></div>
            </div>

            <!-- Botões de Ação -->
            <div class="form-actions d-flex justify-content-end gap-2">
                <button type="button" class="btn btn-outline-secondary" id="btn-preview">
                    <i class="fas fa-eye me-1"></i>Preview
                </button>
                <button type="submit" class="btn btn-success">
                    <i class="fas fa-save me-1"></i>Salvar Lançamento
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Modal de Preview mantido -->
<div class="modal fade" id="previewModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Preview do Lançamento</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="preview-content"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            </div>
        </div>
    </div>
</div>